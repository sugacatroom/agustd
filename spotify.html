<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Spotify Data Viewer</title>
  <link rel="stylesheet" href="spotify_style.css">
</head>
<body>
  <header>
    <h1>ğŸ§ Spotify Data Viewer</h1>
    <p>GitHub Actionsã§è‡ªå‹•æ›´æ–°ã•ã‚ŒãŸSpotifyãƒ‡ãƒ¼ã‚¿</p>
  </header>

  <main id="spotify-data">
    <p>ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
  </main>

  <footer>
    <p>Â© 2025 Spotify Data Viewer</p>
  </footer>

  <script>
    async function loadSpotifyData() {
      try {
        const response = await fetch('spotify_data.json');
        if (!response.ok) throw new Error("JSONãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚");
        const data = await response.json();

        const container = document.getElementById('spotify-data');
        container.innerHTML = '';

        if (!Array.isArray(data) || data.length === 0) {
          container.innerHTML = '<p>ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>';
          return;
        }

      data.forEach(track => {
          const item = document.createElement('div');
          item.className = 'track-item';

          // Spotifyã®æ›²ãƒšãƒ¼ã‚¸URL
          const spotifyUrl = `https://open.spotify.com/track/${track.id}`;

          // ã‚¢ãƒ«ãƒãƒ ç”»åƒï¼ˆã¾ã Pythonã§å‡ºåŠ›ã—ã¦ãªã„å ´åˆã¯ä»£æ›¿ç”»åƒï¼‰
          const albumImage = track.album_image || 'https://via.placeholder.com/150?text=No+Image';

          item.innerHTML = `
            <img src="${albumImage}" alt="${track.album}" class="album-cover">
            <div class="track-info">
              <h3><a href="${spotifyUrl}" target="_blank" rel="noopener">${track.track_name}</a></h3>
              <p><strong>ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆ:</strong> ${track.artist}</p>
              <p><strong>ã‚¢ãƒ«ãƒãƒ :</strong> ${track.album}</p>
              <p><strong>äººæ°—åº¦:</strong> ${track.popularity ?? "ä¸æ˜"}</p>
            </div>
          `;
          container.appendChild(item);
      });
      } catch (error) {
        document.getElementById('spotify-data').innerHTML =
          `<p style="color:red;">ã‚¨ãƒ©ãƒ¼: ${error.message}</p>`;
      }
    }

    loadSpotifyData();
  </script>
</body>
</html>
